<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Insert title here</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
	crossorigin="anonymous">
</head>
<body>
	<form action="">
		<div class="form">
			<label for="idLabel" class="form-label">ID</label> <input
				type="text" class="form-control" id="idLabel" readonly="readonly">
		</div>
		<div class="form">
			<label for="nomeInput" class="form-label">Nome do usuário</label>
			<input type="text" class="form-control"
				id="nomeInput" placeholder="Informe o nome">
		</div>
		<div class="form">
		    <label for="idadeInput" class="form-label">Idade</label>
		    <input type="number" class="form-control" id="idadeInput" placeholder="Informe a idade">
		</div>

	</form>
	
	<button type="button" class="btn btn-primary" onclick="salvarUsuario()">Salvar</button>
	<button type="button" class="btn btn-secondary" onclick="document.getElementById('form-label').reset();">Novo</button>
	
	
	
	
	
	
	<script type="text/javascript">
		function salvarUsuario(){
			var id = $("#idLabel").val();
			var nome = $("#nomeInput").val();
			var idade = $("#idadeInput").val();
			
			$.ajax({
				method: "POST",
				url: "salvar",
				data: JSON.stringify({id: id, nome: nome, idade: idade}),
				contentType: "application/json; charset=utf-8",
				success: function(response){
					$("#idLabel").val(response.id);
					alert("Cadastrado com sucesso!!")
				}
				
			}).fail(function(xhr, status, errorThrown){
				alert("Erro ao cadastrar usuário! " + xhr.response());
			})
			
		}
	</script>
	<script
		src="https://code.jquery.com/jquery-3.6.0.min.js"
		integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
		crossorigin="anonymous">
	</script>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
		crossorigin="anonymous">
		
	</script>
</body>
</html>